steel.d("logic/search",["kit/dom/parseDOM","common/channel/onSearch"],function(a,b,c){a("kit/dom/parseDOM"),c.exports=function(b){var c=STK,d=a("common/channel/onSearch"),e={},f={DOM:{},objs:{},DOM_eventFun:{searchInputClick:function(){c.setStyle(f.DOM.searchInput,"display","none"),c.setStyle(f.DOM.searchTextReal,"display","block"),f.DOM.searchInputReal.focus()},searchInputChange:function(){var a=f.DOM.searchInputReal.value;a?f.DOM.searchButton.innerHTML="搜索":f.DOM.searchButton.innerHTML="取消"},searchButtonClick:function(){var a=f.DOM.searchInputReal.value;"搜索"===f.DOM.searchButton.innerHTML?(d.fire("search",[a]),f.DOM.searchButton.innerHTML="取消"):(c.setStyle(f.DOM.searchTextReal,"display","none"),c.setStyle(f.DOM.searchInput,"display","block"),f.DOM.searchInputReal.value="",d.fire("cancel",[]))}},bindCustEvtFuns:{}},g=function(){if(!b)throw new Error("node没有定义")},h=function(){f.DOM=c.kit.dom.parseDOM(c.builder(b).list)},i=function(){},j=function(){c.addEvent(f.DOM.searchInput,"click",f.DOM_eventFun.searchInputClick),c.addEvent(f.DOM.searchInputReal,"input",f.DOM_eventFun.searchInputChange),c.addEvent(f.DOM.searchButton,"click",f.DOM_eventFun.searchButtonClick)},k=function(){},l=function(){},m=function(){f&&(c.foreach(f.objs,function(a){a.destroy&&a.destroy()}),c.removeEvent(f.DOM.searchInput,"click",f.DOM_eventFun.searchInputClick),c.removeEvent(f.DOM.searchInputReal,"input",f.DOM_eventFun.searchInputChange),c.removeEvent(f.DOM.searchButton,"click",f.DOM_eventFun.searchButtonClick),f=null)},n=function(){g(),h(),i(),j(),k(),l()};return n(),e.destroy=m,e}}),steel.d("kit/dom/parseDOM",[],function(a,b,c){STK.register("kit.dom.parseDOM",function(a){return function(a){for(var b in a)a[b]&&1==a[b].length&&(a[b]=a[b][0]);return a}})}),steel.d("common/channel/onSearch",["common/listener"],function(a,b,c){a("common/listener"),c.exports=STK.common.listener.define("common.channel.onSearch",["search","cancel"])}),steel.d("common/listener",[],function(a,b,c){STK.register("common.listener",function(a){var b={},c={};return c.define=function(c,d){if(null!=b[c])throw"common.listener.define: 频道已被占用";b[c]=d;var e={};return e.register=function(d,e){if(null==b[c])throw"common.listener.define: 频道未定义";a.listener.register(c,d,e)},e.fire=function(d,e){if(null==b[c])throw"commonlistener.define: 频道未定义";a.listener.fire(c,d,e)},e.remove=function(b,d){a.listener.remove(c,b,d)},e.cache=function(b){return a.listener.cache(c,b)},e},c})});