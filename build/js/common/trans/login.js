steel.d("common/trans/login",["kit/io/inter"],function(a,b,c){a("kit/io/inter"),STK.register("common.trans.login",function(a){var b=a.kit.io.inter(),c=b.register;return c("login",{url:"/aj/login/login",method:"get"}),c("loginout",{url:"/aj/login/loginout",method:"get"}),b})}),steel.d("kit/io/inter",["kit/io/ajax","kit/io/jsonp","kit/extra/merge"],function(a,b,c){a("kit/io/ajax"),a("kit/io/jsonp"),a("kit/extra/merge"),STK.register("kit.io.inter",function(a){return function(){var b,c,d;return b={},c={},d={},b.register=function(a,b){if(void 0!==c[a])throw a+" interface has been registered";c[a]=b,d[a]={}},b.hookComplete=function(b,c){var e=a.core.util.getUniqueKey();return d[b][e]=c,e},b.removeHook=function(a,b){d[a]&&d[a][b]&&delete d[a][b]},b.getTrans=function(b,e){var f=a.kit.extra.merge(c[b],e);return f.onComplete=function(a,c){try{e.onComplete(a,c)}catch(f){}if("100000"===a.code||"A00006"===a.code)try{e.onSuccess(a,c)}catch(f){}else try{if("100002"===a.code)return void(location.href="/catfood/login");if("100107"===a.code)return;e.onError(a,c)}catch(f){}for(var g in d[b])try{d[b][g](a,c)}catch(f){}},"jsonp"===c[b].requestMode?a.kit.io.jsonp(f):"ijax"===c[b].requestMode?a.kit.io.ijax(f):a.kit.io.ajax(f)},b.request=function(b,e,f){var g=a.core.json.merge(c[b],e);return g.onComplete=function(a,c){try{e.onComplete(a,c)}catch(f){}if("100000"===a.code||"A00006"===a.code)try{e.onSuccess(a,c)}catch(f){}else try{if("100002"===a.code)return void(window.location.href=a.data);e.onError(a,c)}catch(f){}for(var g in d[b])try{d[b][g](a,c)}catch(f){}},g=a.core.obj.cut(g,["noqueue"]),g.args=f,"jsonp"===c[b].requestMode?a.jsonp(g):"ijax"===c[b].requestMode?a.ijax(g):a.ajax(g)},b}})}),steel.d("kit/io/ajax",["kit/extra/merge","kit/io/orignAjax"],function(a,b,c){a("kit/extra/merge"),a("kit/io/orignAjax"),STK.register("kit.io.ajax",function(a){return function(b){var c,d,e,f,g,h,i;h=function(a){g=!1,b.onComplete(a,c.args),setTimeout(j,0)},i=function(a){g=!1,b.onFail(a,c.args),setTimeout(j,0)},e=[],f=null,g=!1,c=a.parseParam({url:"",method:"get",responseType:"json",timeout:3e4,onTraning:a.funcEmpty,isEncode:!0},b),c.onComplete=h,c.onFail=i;var j=function(){e.length&&g!==!0&&(g=!0,c.args=e.shift(),f=a.kit.io.orignAjax(c))},k=function(a){for(;e.length;)e.shift();if(g=!1,f)try{f.abort()}catch(b){}f=null};return d={},d.request=function(c){if(c||(c={}),b.noQueue&&k(),window.$CONFIG&&$CONFIG.pageextra){var d=a.queryToJson($CONFIG.pageextra);if(d)for(var g in d)c[g]=d[g]}b.uniqueRequest&&f||(e.push(c),c._t=0,j())},d.abort=k,d}})}),steel.d("kit/extra/merge",[],function(a,b,c){STK.register("kit.extra.merge",function(a){return function(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c}})}),steel.d("kit/io/orignAjax",[],function(require,exports,module){STK.register("kit.io.orignAjax",function($){return function(oOpts){var opts=$.core.obj.parseParam({url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:null,onTimeout:$.core.func.empty,uniqueID:null,onFail:$.core.func.empty,method:"get",asynchronous:!0,header:{},isEncode:!1,responseType:"json"},oOpts);if(""==opts.url)throw"ajax need url in parameters object";var tm,trans=$.core.io.getXHR(),cback=function(){if(4==trans.readyState){clearTimeout(tm);var data="";if("xml"===opts.responseType)data=trans.responseXML;else if("text"===opts.responseType)data=trans.responseText;else try{data=trans.responseText&&"string"==typeof trans.responseText?eval("("+trans.responseText+")"):{}}catch(exp){data=opts.url+"return error : data error"}200==trans.status?null!=opts.onComplete&&opts.onComplete(data):0==trans.status||null!=opts.onFail&&opts.onFail(data,trans)}else null!=opts.onTraning&&opts.onTraning(trans)};if(trans.onreadystatechange=cback,opts.header["Content-Type"]||(opts.header["Content-Type"]="application/x-www-form-urlencoded"),opts.header["X-Requested-With"]||(opts.header["X-Requested-With"]="XMLHttpRequest"),"get"==opts.method.toLocaleLowerCase()){var url=$.core.util.URL(opts.url,{isEncodeQuery:opts.isEncode});url.setParams(opts.args),url.setParam("__rnd",(new Date).valueOf()),trans.open(opts.method,url,opts.asynchronous);try{for(var k in opts.header)trans.setRequestHeader(k,opts.header[k])}catch(exp){}trans.send("")}else{trans.open(opts.method,opts.url,opts.asynchronous);try{for(var k in opts.header)trans.setRequestHeader(k,opts.header[k])}catch(exp){}trans.send($.core.json.jsonToQuery(opts.args,opts.isEncode))}return opts.timeout&&(tm=setTimeout(function(){try{trans.abort()}catch(a){}opts.onTimeout({},trans),opts.onFail({code:"100001",msg:"Request timeoutÔºÅ"})},opts.timeout)),trans}})}),steel.d("kit/io/jsonp",["kit/extra/merge"],function(a,b,c){a("kit/extra/merge"),STK.register("kit.io.jsonp",function(a){return function(b){var c,d,e,f,g;c=a.parseParam({url:"",method:"get",responseType:"json",varkey:"_v",timeout:3e4,onComplete:a.funcEmpty,onTraning:a.funcEmpty,onFail:a.funcEmpty,isEncode:!0},b),e=[],f={},g=!1;var h=function(){e.length&&g!==!0&&(g=!0,f.args=e.shift(),f.onComplete=function(a){g=!1,c.onComplete(a,f.args),setTimeout(h,0)},f.onFail=function(a){g=!1,c.onFail(a),setTimeout(h,0)},a.jsonp(a.kit.extra.merge(c,{args:f.args,onComplete:function(a){f.onComplete(a)},onFail:function(a){try{f.onFail(a)}catch(b){}}})))};return d={},d.request=function(a){a=a||{},a.superuid||!!$CONFIG.superuid&&(a.superuid=$CONFIG.superuid),a||(a={}),e.push(a),a._t=1,h()},d.abort=function(a){for(;e.length;)e.shift();g=!1,f=null},d}})});